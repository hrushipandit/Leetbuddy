{"ast":null,"code":"import React,{useState,useEffect}from'react';import{Link,useNavigate}from\"react-router-dom\";import'./Navbar.css';import axios from'axios';import{jsx as _jsx,Fragment as _Fragment,jsxs as _jsxs}from\"react/jsx-runtime\";export const Navbar=()=>{const[isLoggedIn,setIsLoggedIn]=useState(false);const navigate=useNavigate();// Use navigate for redirection\nuseEffect(()=>{checkLoginStatus();},[]);const checkLoginStatus=async()=>{try{const response=await axios.get('https://www.leetbud.com/auth/login/status',{withCredentials:true});console.log(response.data.isLoggedIn);setIsLoggedIn(response.data.isLoggedIn);}catch(error){console.error('Failed to check login status:',error);}};const handleLogin=()=>{// Redirect to Google OAuth login\nwindow.location.href='https://www.leetbud.com/auth/google';};const handleLogout=async()=>{try{axios.get('https://www.leetbud.com/logout',{withCredentials:true});setIsLoggedIn(false);console.log(setIsLoggedIn);setTimeout(()=>navigate('/'),0);// Use navigate to redirect\n}catch(error){console.log(error);console.error('Logout failed:',error);}};return/*#__PURE__*/_jsxs(\"nav\",{className:\"bg-blue-700 py-2 px-4 shadow-md flex justify-between items-center\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex space-x-4\",children:[/*#__PURE__*/_jsx(Link,{to:\"/\",className:\"text-white font-semibold hover:text-indigo-300\",children:\"Home\"}),isLoggedIn&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Link,{to:\"/practice\",className:\"text-white font-semibold hover:text-indigo-300\",children:\"Practice\"}),/*#__PURE__*/_jsx(Link,{to:\"/problems\",className:\"text-white font-semibold hover:text-indigo-300\",children:\"Problem List\"})]})]}),isLoggedIn?/*#__PURE__*/_jsx(\"button\",{onClick:handleLogout,className:\"bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-700\",children:\"Logout\"}):/*#__PURE__*/_jsx(\"button\",{onClick:handleLogin,className:\"bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-700\",children:\"Login with Google\"})]});};export default Navbar;","map":{"version":3,"names":["React","useState","useEffect","Link","useNavigate","axios","jsx","_jsx","Fragment","_Fragment","jsxs","_jsxs","Navbar","isLoggedIn","setIsLoggedIn","navigate","checkLoginStatus","response","get","withCredentials","console","log","data","error","handleLogin","window","location","href","handleLogout","setTimeout","className","children","to","onClick"],"sources":["C:/Users/hrush/Desktop/Personal Projects/Leetbud/leetbud/Frontend/src/components/Navbar.tsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { Link, useNavigate } from \"react-router-dom\";\r\nimport './Navbar.css';\r\nimport axios from 'axios';\r\n\r\nexport const Navbar = () => {\r\n    const [isLoggedIn, setIsLoggedIn] = useState(false);\r\n    const navigate = useNavigate();  // Use navigate for redirection\r\n\r\n    useEffect(() => {\r\n        checkLoginStatus();\r\n    }, []);\r\n\r\n    const checkLoginStatus = async () => {\r\n        try {\r\n            const response = await axios.get('https://www.leetbud.com/auth/login/status', { withCredentials: true });\r\n            console.log(response.data.isLoggedIn);\r\n            setIsLoggedIn(response.data.isLoggedIn);\r\n        } catch (error) {\r\n            console.error('Failed to check login status:', error);\r\n        }\r\n    };\r\n\r\n    const handleLogin = () => {\r\n        // Redirect to Google OAuth login\r\n        window.location.href = 'https://www.leetbud.com/auth/google';\r\n    };\r\n\r\n    const handleLogout = async () => {\r\n        try {\r\n            axios.get('https://www.leetbud.com/logout', { withCredentials: true });\r\n            setIsLoggedIn(false);\r\n            console.log(setIsLoggedIn);\r\n            setTimeout(() => navigate('/'), 0);  // Use navigate to redirect\r\n        } catch (error) {\r\n            console.log(error);\r\n            console.error('Logout failed:', error);\r\n        }\r\n    };\r\n\r\n    return (\r\n        <nav className=\"bg-blue-700 py-2 px-4 shadow-md flex justify-between items-center\">\r\n            <div className=\"flex space-x-4\">\r\n                <Link to=\"/\" className=\"text-white font-semibold hover:text-indigo-300\">Home</Link>\r\n                {isLoggedIn && (\r\n                    <>\r\n                        <Link to=\"/practice\" className=\"text-white font-semibold hover:text-indigo-300\">Practice</Link>\r\n                        <Link to=\"/problems\" className=\"text-white font-semibold hover:text-indigo-300\">Problem List</Link>\r\n                    </>\r\n                )}\r\n            </div>\r\n            {isLoggedIn ? (\r\n                <button onClick={handleLogout} className=\"bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-700\">Logout</button>\r\n            ) : (\r\n                <button onClick={handleLogin} className=\"bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-700\">Login with Google</button>\r\n            )}\r\n        </nav>\r\n    );\r\n}\r\n\r\nexport default Navbar;\r\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CAClD,OAASC,IAAI,CAAEC,WAAW,KAAQ,kBAAkB,CACpD,MAAO,cAAc,CACrB,MAAO,CAAAC,KAAK,KAAM,OAAO,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,QAAA,IAAAC,SAAA,CAAAC,IAAA,IAAAC,KAAA,yBAE1B,MAAO,MAAM,CAAAC,MAAM,CAAGA,CAAA,GAAM,CACxB,KAAM,CAACC,UAAU,CAAEC,aAAa,CAAC,CAAGb,QAAQ,CAAC,KAAK,CAAC,CACnD,KAAM,CAAAc,QAAQ,CAAGX,WAAW,CAAC,CAAC,CAAG;AAEjCF,SAAS,CAAC,IAAM,CACZc,gBAAgB,CAAC,CAAC,CACtB,CAAC,CAAE,EAAE,CAAC,CAEN,KAAM,CAAAA,gBAAgB,CAAG,KAAAA,CAAA,GAAY,CACjC,GAAI,CACA,KAAM,CAAAC,QAAQ,CAAG,KAAM,CAAAZ,KAAK,CAACa,GAAG,CAAC,2CAA2C,CAAE,CAAEC,eAAe,CAAE,IAAK,CAAC,CAAC,CACxGC,OAAO,CAACC,GAAG,CAACJ,QAAQ,CAACK,IAAI,CAACT,UAAU,CAAC,CACrCC,aAAa,CAACG,QAAQ,CAACK,IAAI,CAACT,UAAU,CAAC,CAC3C,CAAE,MAAOU,KAAK,CAAE,CACZH,OAAO,CAACG,KAAK,CAAC,+BAA+B,CAAEA,KAAK,CAAC,CACzD,CACJ,CAAC,CAED,KAAM,CAAAC,WAAW,CAAGA,CAAA,GAAM,CACtB;AACAC,MAAM,CAACC,QAAQ,CAACC,IAAI,CAAG,qCAAqC,CAChE,CAAC,CAED,KAAM,CAAAC,YAAY,CAAG,KAAAA,CAAA,GAAY,CAC7B,GAAI,CACAvB,KAAK,CAACa,GAAG,CAAC,gCAAgC,CAAE,CAAEC,eAAe,CAAE,IAAK,CAAC,CAAC,CACtEL,aAAa,CAAC,KAAK,CAAC,CACpBM,OAAO,CAACC,GAAG,CAACP,aAAa,CAAC,CAC1Be,UAAU,CAAC,IAAMd,QAAQ,CAAC,GAAG,CAAC,CAAE,CAAC,CAAC,CAAG;AACzC,CAAE,MAAOQ,KAAK,CAAE,CACZH,OAAO,CAACC,GAAG,CAACE,KAAK,CAAC,CAClBH,OAAO,CAACG,KAAK,CAAC,gBAAgB,CAAEA,KAAK,CAAC,CAC1C,CACJ,CAAC,CAED,mBACIZ,KAAA,QAAKmB,SAAS,CAAC,mEAAmE,CAAAC,QAAA,eAC9EpB,KAAA,QAAKmB,SAAS,CAAC,gBAAgB,CAAAC,QAAA,eAC3BxB,IAAA,CAACJ,IAAI,EAAC6B,EAAE,CAAC,GAAG,CAACF,SAAS,CAAC,gDAAgD,CAAAC,QAAA,CAAC,MAAI,CAAM,CAAC,CAClFlB,UAAU,eACPF,KAAA,CAAAF,SAAA,EAAAsB,QAAA,eACIxB,IAAA,CAACJ,IAAI,EAAC6B,EAAE,CAAC,WAAW,CAACF,SAAS,CAAC,gDAAgD,CAAAC,QAAA,CAAC,UAAQ,CAAM,CAAC,cAC/FxB,IAAA,CAACJ,IAAI,EAAC6B,EAAE,CAAC,WAAW,CAACF,SAAS,CAAC,gDAAgD,CAAAC,QAAA,CAAC,cAAY,CAAM,CAAC,EACrG,CACL,EACA,CAAC,CACLlB,UAAU,cACPN,IAAA,WAAQ0B,OAAO,CAAEL,YAAa,CAACE,SAAS,CAAC,4DAA4D,CAAAC,QAAA,CAAC,QAAM,CAAQ,CAAC,cAErHxB,IAAA,WAAQ0B,OAAO,CAAET,WAAY,CAACM,SAAS,CAAC,4DAA4D,CAAAC,QAAA,CAAC,mBAAiB,CAAQ,CACjI,EACA,CAAC,CAEd,CAAC,CAED,cAAe,CAAAnB,MAAM","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}